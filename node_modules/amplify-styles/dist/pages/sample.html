
<!doctype html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title></title>

    

    <!-- Amplify Styles -->
     <link rel="stylesheet" href="../assets/toolkit/styles/amplify-styles.css">
    <!-- /Amplify Styles -->

    <!-- Demo page styles -->
    <link rel="stylesheet" href="../assets/toolkit/styles/amplify-demo-styles.css">
    <!-- /Demo page styles -->

    <!-- Ben Ratliff's work-in-progress styles -->
    <link rel="stylesheet" href="../assets/toolkit/styles/wip-bratliff.css">
    <!-- / Ben Ratliff's work-in-progress styles -->

    <!-- jquery -->
    <script src="../assets/toolkit/scripts/vendor/jquery.min.js"></script>
    <!-- /jquery -->

    <!-- Bootstrap 4 scripts -->
    <script src="../assets/toolkit/scripts/vendor/bootstrap.bundle.min.js"></script>
    <!-- /Bootstrap 4 scripts -->

</head>
<body>



    
<template id="multiselect-dropdown">

    <div class="amplify-dropdown amplify-multi-select" id="multi-select-menu">
        <button class="btn" type="button" aria-haspopup="true" aria-expanded="false" id="multi-select-button">Select multiple items</button>
        <div class="dropdown-menu" aria-labelledby="multi-select-button">
            <label tabindex="0" class="dropdown-item">
                <input type="checkbox" value="on">
                <div class="checkbox-div"></div>
                <span>Teacher</span>
            </label>            <label tabindex="0" class="dropdown-item">
                <input type="checkbox" value="on">
                <div class="checkbox-div"></div>
                <span>Administrator</span>
            </label>            <label tabindex="0" class="dropdown-item">
                <input type="checkbox" value="on">
                <div class="checkbox-div"></div>
                <span>Principal</span>
            </label>            <label tabindex="0" class="dropdown-item">
                <input type="checkbox" value="on">
                <div class="checkbox-div"></div>
                <span>Staff</span>
            </label>            <label tabindex="0" class="dropdown-item">
                <input type="checkbox" value="on">
                <div class="checkbox-div"></div>
                <span>Assistant to the Associate Minister of Directors</span>
            </label>            <label tabindex="0" class="dropdown-item">
                <input type="checkbox" value="on">
                <div class="checkbox-div"></div>
                <span>Evaluator</span>
            </label>        </div>
    </div>
    <style>
        .drop-demo {
            margin-top: 50px;
        }
        multiselect-dropdown {
            margin-left: 20px;
        }
    </style>
</template>

<div class="drop-demo" style="display:flex;">
    <multiselect-dropdown></multiselect-dropdown>
    <multiselect-dropdown></multiselect-dropdown>
    <multiselect-dropdown></multiselect-dropdown>
</div>


<script>

(function() {
  const doc = (document._currentScript || document.currentScript).ownerDocument;
  const template = doc.querySelector('#multiselect-dropdown');
  const key = {
    tab: 9,
    return: 13,
    escape: 27,
    space: 32,
    up: 38,
    down: 40
  }
  let counter = -1;

  customElements.define('multiselect-dropdown', class extends HTMLElement {

    constructor() {
      super();

        this.addEventListener('click', e => {
           let menu = this.children[0];

           menu.classList.toggle('show');
        })

        this.addEventListener('keydown', e => {
            const menu = this.children[0];

            if (e.keyCode == key.return) {

                if (menu.classList.contains("show")) {
                    e.stopPropagation();
                    e.preventDefault(); 
                    document.activeElement.click();
                }

            } else if (e.keyCode == key.down) {
                
                e.preventDefault(); 
                counter === -1 ? this.getElementsByClassName('dropdown-item')[0].focus() : '';

            } else if (e.keyCode == key.tab) {

                if (menu.classList.contains("show")) {
                    e.stopPropagation();
                    e.preventDefault(); 
                    document.activeElement.click();
                }
            }
        })
    }

    // Without the shadow DOM, we have to manipulate the custom element
    // after it has been inserted in the DOM.
    connectedCallback() {
      const temp = document.importNode(template.content, true);
      this.appendChild(temp);
    }

  });
})();

</script>




    <!-- toolkit scripts -->
    <script src="../assets/toolkit/scripts/toolkit.js"></script>
    <!-- /toolkit scripts -->

    <!-- inject SVGs  -->
    <div id='svg-container' style="position:fixed; visibility:hidden"></div>
    <script src='../assets/toolkit/svg/amplify-sprite.js'></script>
    <!-- /inject SVGs -->

</body>
</html>
